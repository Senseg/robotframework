Output files
------------

Several outputs files are created When tests are executed, and most of
them are somehow related to test results. This section explains what
outputs are created, how to configure where to create them, and how to
fine-tune their contents.

.. contents::
   :depth: 2
   :local:


Different output files
~~~~~~~~~~~~~~~~~~~~~~

This section explains different output files and how to configure
where they are created. Other outputs than the `syslog file`_ are
configured using command line options, which get the path to the
output file as an argument. All these options, except
:setting:`--output` when executing test cases, also accept special
value :setting:`NONE` (case-insensitive), which means that the output
file in question is not created at all.


Output directory
''''''''''''''''

The default location where all output files are created is the
directory where the execution is started from, but it can be altered
with :setting:`--outputdir (-d)` option. All output files can be
set using an absolute path, in which case they are created to
the specified place, but in other cases the path is considered
relative to the output directory. Regardless how a path to an
individual output file is got, its parent directory is created
automatically if it does not exist.


Output file
'''''''''''

XML output files contain all the test execution results. Log_,
report_, and summary_ files are generated based on them, they can also
be `combined and otherwise post-processed`__ after the test execution.

The command line option :setting:`--output (-o)` determines where
output files are created. When tests are executed, the default name
for outputs is :path:`output.xml`, and it is not possible to suppress creating
them. When post-processing outputs, new output files are not created
unless this option is explicitly used.

__ `Post-processing outputs`_


Log file
''''''''

Log files contain details about the executed test cases. They have a
hierarchical structure showing test suite, test case and keyword
details. Log files are needed nearly every time when test results
needs to be investigated in detail. Even though log files also have
statistics, report_ and summary_ files are better for getting an
higher-level overview.

The command line option :setting:`--log (-l)` determines where log
files are created. Unless special value :setting:`NONE` is used, log
files are always created and their default name is :path:`log.html`.

.. figure:: log.png
   :width: 500
   :height: 534

   An example log file


Report file
'''''''''''

Report files contain an overview of the test execution results. They
have statistic based on tags and executed test suites, as well as
short details about every executed test suite and test case. When both
report and log is generated, the report has links to the log file for
easy navigation to more detailed information.  It is easy to see the
overall test execution status from the report, because its backgroud
is green is if all `critical tests`_ pass, and bright red otherwise.

The command line option :setting:`--report (-r)` determines where
report files are created. Similarly as log files, reporst are always
created unless :setting:`NONE` is used as a value. The default name
for a log file is :path:`report.html`.

.. figure:: report.png
   :width: 600
   :height: 568

   An example report file


Summary file
''''''''''''

Summary files contain same statistics as reports, and their backgrounds
are similarly green or red depending on the overall test execution
status. They have no test case details, however, which makes them much
smaller than reports. They are usefull when a big number of test cases is
executed, and a very high-level overview is needed. 

Summary files are not generated by default. When they are needed, they
can be created using the command line option :setting:`--summary (-S)`.

.. figure:: summary.png
   :width: 600
   :height: 450
   
   An example summary file


Debug file
''''''''''

Debug files are plain text files that are written during the
execution. All messages got from test libraries are written to them,
as wel as information about started and ended test suites, test cases
and keywords. Debug files can be used for monitoring the test
execution using, for example, a separate `file viewer tool`__ or in
UNIX-like systems simply with :prog:`tail -f` command.

__ `Tool for viewing debug files (fileviewer.py)`_

Debug files are not created unless the command line option
:setting:`--debugfile (-b)` is used explicityly.


Setting timestamps to output file names
'''''''''''''''''''''''''''''''''''''''

*TO BE CONTINUED FROM HERE*

Because all output file names can be given from the command line, it
is possible to use timestamps 

It is also possible to get timestamped names for output files by using
the command line option :setting:`--timestampoutputs (-T)`. The timestamp
is of format "YYMMDD-hhmmss" and will be placed between the base name
and the extension of each output file name.

For example following 
    
   pybot --timestampoutputs --log mylog.html tests

generates files called output-080604-163225.xml and mylog-080604-163225.html


Syslog file
'''''''''''

Syslog files contains debug information about the functioning of Robot 
Framework. The information in it is usually only needed when some unexpected
error occurs during the execution of tests.

To enable syslog, the environment variable :var:`ROBOT_SYSLOG_FILE` must contain an 
absolute path to a non-existing file. The :var:`ROBOT_SYSLOG_LEVEL` environment 
variable determines the level of logging. The available levels are the same as with the
`--loglevel`_ command line option.


Listener outputs
''''''''''''''''



Splitting outputs
~~~~~~~~~~~~~~~~~

For large test suites, instead of generating one vast output file, Robot 
Framework can be configured to produce a set of smaller output files. In this
case, if log files are created, one log file will be created from each 
output file. If a report file is generated, it will still be only one file, 
but links to multiple log files.

Splitting can be activated with the command line option :setting:`--splitoutputs`,
which takes split level as its argument. 

When outputs are split, a top-level output file contains the general 
information about the whole test execution and it links to sublevel output 
files, which contain details of some suites and tests. The exact contents of 
each file depends on the split level and the directory structure of the test data.
As the examples below show, the test data needs to be structured in a 
way that supports splitting outputs, if you wish to use that feature.


Unbalanced output
'''''''''''''''''

When an unbalanced directory structure (see the figure below) is executed with a split
level set to 3, an individual output file is created for test case files from 1 to 4.
The information about the test case files 5 and 6 is written to the root 
level output file. In this case, the following files will be created:

- :path:`output.xml`, which contains summary information of the executed suite, 
  details of test case files 5 and 6, and links to sublevel output files.
    
- :path:`output-001.xml`, :path:`output-002.xml`,
  :path:`output-003.xml` and :path:`output-004.xml`, which contain
  details of test case files 1, 2, 3 and 4, respectively.


.. figure:: unbalanced_output.png
   :width: 629
   :height: 278

   Example unbalanced output file

Balanced output
'''''''''''''''

When a balanced directory structure (see the figure below) is executed with a split
level set to 3, an individual output file is created for all test case files.
In this case, the following files will be created:

- :path:`output.xml`, which contains summary information on the executed test suite 
  and links to sublevel output files.
    
- :path:`output-001.xml`, :path:`output-002.xml`, :path:`output-003.xml`, :path:`output-004.xml`, 
  :path:`output-005.xml`, :path:`output-006.xml`, :path:`output-007.xml`, and :path:`output-008.xml`, which
  contain details of test case files from 1 to 8.


.. figure:: balanced_output.png
   :width: 597
   :height: 266

   Example balanced output file


Setting titles
~~~~~~~~~~~~~~

Titles for log_, report_ and summary_ files can be given
from the command line using the options :setting:`--logtitle`,
:setting:`--reporttitle` and :setting:`--summarytitle`,
respectively. The default title is generated from the name(s) of the
input file(s).


Configuring statistics
~~~~~~~~~~~~~~~~~~~~~~

There are several command line options that can be used to configure and tweak the 
contents of 'Statistics by Tag', 'Test Details by Tag' and 'Statistics by Suite'
-tables in outputs files. 

Including and excluding tag statistics
''''''''''''''''''''''''''''''''''''''

The command line options :setting:`--tagstatinclude` and :setting:`--tagstatexclude`
can be used to define the contents of the Statistics by Tag and Test Details
by Tag tables. Both of these options may be given several times and their 
arguments may be simple patterns. If a tag matches both include and exclude, it 
will be excluded. 


Generating combined tag statistics
''''''''''''''''''''''''''''''''''

The command line option :setting:`--tagstatcombine` can be used to generate an
aggregate row in the Statistics by Tag and Test Details by Tag tables.
There are three somewhat different ways for giving arguments for this option:

One tag as a pattern
    All tags matching the pattern are combined, for example
    :cli:`--tagstatcombine it-\*`.

Two or more tags separated by "AND" or "&"
    Also in this case tags may be patterns. Tests must have all these tags to
    be included in the combined statistics. 
    Example: :cli:`--tagstatcombine tag1&tag2ANDit-1?`

Two or more tags separated by "NOT"
    Also in this case tags may be patterns. Only tests matching the first tag, but 
    not any of the following tags, are included in the combined statistics.
    Example: :cli:`--tagstatcombine it-11NOTsmoke`

Creating links from tag names
'''''''''''''''''''''''''''''

It is possible to add an external link to the Statistics by Tag table by using 
the command line option :setting:`--tagstatlink`. An argument to this option is given 
in the format :code:`pattern:link:title`, where pattern may contain the characters "*" (matches
anything) and "?" (matches any character). The matches of wildcards may be used in the 
resulting link with the syntax :code:`%N`, where "N" is the index of the match starting from 1.
Examples::

    --tagstatlink mytag:http://my.domain:Link
    --tagstatlink bug-*:http://tracker/id=%1:Bug_Tracker

Adding documentation to tags
''''''''''''''''''''''''''''

Documentation for tags can be set with the command line option :setting:`--tagdoc`
The argument is in the format :code:`tag:doc`, where "tag" may be a simple pattern and "doc" may
contain simple formatting. This documentation is shown in the 
Test Details by Tag table and also as a tool tip in the Statistics by Tag table.
Examples::

    --tagdoc mytag:My_documentation
    --tagdoc regression:*See*_http://info.html
    --tagdoc owner-*:Original_author


Configuring the Statistics by Suite table
'''''''''''''''''''''''''''''''''''''''''

You can control how many levels of subsuites are displayed in the 
Statistics by Suite table. This is done with the command line option
:setting:`--suitestatlevel`. If 0 is given as an argument, the whole table is 
removed.


Setting log level
~~~~~~~~~~~~~~~~~

By default, the `keyword output`__ from test libraries is logged at the :msg:`INFO` 
level. This can be changed from the command line using :setting:`--loglevel (-L)`. 
In descending order, the available log levels are :msg:`WARN`, :msg:`INFO`, 
:msg:`DEBUG`, and :msg:`TRACE`. When a certain log level is used, everything with a 
lesser log level is ignored when an output file is written, and thus that information 
is not available when log files are generated. 

__ `Logging information`_

.. Note::
   With the log level :msg:`TRACE`, Robot Framework itself logs the actual values
   of keyword arguments and return values. Normally, only variable names are 
   logged. This may increase the size of the output file(s) considerably.


Removing keywords from outputs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When outputs are processed with :prog:`rebot`, you can remove all
keyword information of passed tests from the produced log file(s)
using the command line option :setting:`--removekeywords`. Only the
names of top-level keywords will be listed. This may reduce the size
of the log file(s) dramatically, while still preserving the essential
information about failed tests.

