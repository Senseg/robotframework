.. include:: <isonum.txt>
.. include:: ../userguide/src/roles.txt

=====================================
  Robot Framework Quick Start Guide
=====================================

| Copyright |copy| Nokia Siemens Networks 2008
| Licensed under the Apache License, Version 2.0


.. contents:: Table of Contents
   :depth: 2


Introduction
============

Overview
--------

Robot Framework is a keyword-based test automation tool.  Tests live
in html test files and make use of keywords implemented in test libraries to
drive the software under test.

Because Robot Framework is flexible and extensible, it is ideally
suited to testing complex software with a variety of interfaces: GUI,
Web, command line, Web services, etc.  

This guide is designed to introduce the basic concepts of Robot Framework.
For a detailed technical description, please refer to `Robot Framework User 
Guide`_.


Installation
------------

Before Robot Framework can be installed, Python must be installed.
In addition, to use test libraries written in Java, Jython must be
installed. To run this quickstart, Python is enough.

There are three different ways to install Robot Framework, of which the most 
suitable can be chosen:

1. There is a binary installer for Windows platform. It is enough to
   double-click the installer and follow instructions.
2. On every platform, Robot Framework can be installed from source. To install
   from source, extract the distribution and run command `python setup.py
   install`
3. Robot Framework can be installed using easy_install by issuing comand
   `easy_install robotframework`

After the framework is installed, it is useful to include the directory
containing start-up scipts in PATH environment variable. In Linux this
actually happens automatically, in Windows this must be done from 'Control
Panel -> System -> Advanced -> Environment Variables' by adding e.g.
C:\\Python25\\Scripts to PATH.

Successful installation can be verified with command `pybot --version` which
should output something like::

    $ pybot --version
    Robot 2.0.1 (Python 2.5.2 on linux2)

Detailed installation instructions can be found from the `user guide`_.


Running this demo
-----------------

To run this demo, open a command shell, cd to this directory, and type
the following command at the command line::

   pybot quickstart.html

The tests in this file will execute and generate the following reports:

:path:`report.html`
   the test results summary
:path:`log.html`
   the test results details
:path:`output.xml`
   the test results in a portable XML format for integration with other tools

Open `report.html`__ (note: the link works only after this guide has been 
executed at least once) in your browser, then click on the links to explore
the results. The :path:`report.html` file links to the :path:`log.html` file.

__ report.html

There are also a number of command line options that can be used to control
the test execution and generated outputs. Complete list can be viewed by
issuing `pybot --help`. The following command changes the name of the log
file and the name of the top level suite in the report and log::
    
    pybot --log mylog.html --name My_Fine_Tests quickstart.html


Introducing the sample application
----------------------------------

The sample application for this paper is a variation on a classic
login example: it's a command-line based authentication server written
in Python. At the moment, the sample application allows a user to do
three things:

   * Create an account with a valid password
   * Log in with a valid user name and password
   * Change the password of an existing account

Attempting to log in with a non-existent user account or with an invalid password results in the same error message::

    Access Denied

Creating a user account with valid password results in the message::

    SUCCESS

There are two requirements that a password must fulfill to be valid: it must
be between 7-12 characters long, and it must contain lower and upper case
letters and numbers, but it must not contain special characters. Trying to
create a user with invalid password results in one of the following messages::

    Creating user failed: Password must be 7-12 characters long
    Creating user failed: Password must be a combination of lowercase and
    uppercase letters and numbers

Changing password with invalid credentials results in the same error message
as logging in with invalid credentials. The validity of new password is
verified and if not valid, an error message is given.

And logging in successfully results in the message::

    Logged In

So, for example, if I issue the following commands, I should get the following responses::

    > python sut/login.py login fred P4ssw0rd
    Access Denied

    > python sut/login.py create fred P4ssw0rd
    SUCCESS

    > python sut/login.py login fred P4ssw0rd
    Logged In

    > python sut/login.py change-password freddy P4ssw0rd dr0wss4P
    Access Denied

    > python sut/login.py change-password fred P4ssw0rd dr0wss4P
    SUCCESS

That's all our little sample application does just at the moment.
It's not much.  But it's a start.  Now we need to add some new
capabilities to it.


Test cases
==========

First test cases
----------------

Robot Framework test cases are created using a simple tabular syntax. For example the following table has two tests:

   * User can create an account and log in
   * User cannot log in with bad password

.. table:: 
   :class: example

   =====================================  =================================  ==============  ==============
               Test Case                                Action                  Argument        Argument
   =====================================  =================================  ==============  ==============
   User can create an account and log in  Create Valid User                  fred            P4ssw0rd
   \                                      Attempt to Login with Credentials  fred            P4ssw0rd
   \                                      Status Should Be                   Logged In       \
   \                                      \                                  \               \
   User cannot log in with bad password   Create Valid User                  betty           P4ssw0rd
   \                                      Attempt to Login with Credentials  betty           wrong
   \                                      Status Should Be                   Access Denied   \    
   =====================================  =================================  ==============  ==============


Notice that these tests read almost like a manual test written in
English rather than like an automated test. Robot Framework uses the
keyword-driven approach that supports writing tests that capture the
essence of the actions and expectations in natural language. Test
cases are constructed from keywords (normaly in the second column) and
their possible arguments .


Higher-level test cases
-----------------------

Test cases can also be created using only high-level keywords that
take no arguments. This style allows using totally free text which is
suitable for communication even with non-technical customers or
other stakeholders. Robot Framework does not enforce any particular
style for writing test cases, and it is possible to use for example
*given-when-then* format popularized by `behaviour-driven development`__
(BDD) like in the example below.

__ http://en.wikipedia.org/wiki/Behavior_driven_development


.. table:: 
   :class: example

   ========================  ===========================================
           Test Case                           Steps             
   ========================  ===========================================
   User can change password  Given a user has a valid account
   \                         when she changes her password
   \                         then she can log in with the new password
   \                         and she cannot use the old password anymore
   ========================  ===========================================


This kind of use-case or user-story-like test cases are ideally suited
for *acceptance test-driven development* (ATTD). In ATTD acceptance
tests are written before implementing actual product features and they
act also as requirements.


Data-driven test cases
----------------------

Quite often several test cases are otherwise similar but they have
slightly different input or output data. In these situations
*data-driven* test cases, like six tests below, allow varying the test
data without duplicating the workflow.

.. table:: 
   :class: example

   ==================================  ===============================================  =============  ======================
                Test Case                                    Action                       Password     Expected error message
   ==================================  ===============================================  =============  ======================
   Too short password                  Creating user with invalid password should fail  abCD5          ${PWD INVALID LENGTH}
   Too long password                   Creating user with invalid password should fail  abCD567890123  ${PWD INVALID LENGTH}
   Password without lowercase letters  Creating user with invalid password should fail  123DEFG        ${PWD INVALID CONTENT}
   Password without capital letters    Creating user with invalid password should fail  abcd56789      ${PWD INVALID CONTENT}
   Password without numbers            Creating user with invalid password should fail  AbCdEfGh       ${PWD INVALID CONTENT}
   Password with special characters    Creating user with invalid password should fail  abCD56+        ${PWD INVALID CONTENT}
   ==================================  ===============================================  =============  ======================

In these tests there is only one keyword (:name:`Creating user with
invalid password should fail`) per test case, and it is responsible
for trying to create a user with the provided password and checking
that creation fails with an expected error message. Notice that the error
messages are specified using variables_.


Keywords
========

Keywords that test cases are created from come from three sources:
`built-in keywords`_ are always available, `library keywords`_ come
from imported test libraries, and so called `user keywords`__ cab be
created using the same tabular syntax that is used for creating test
cases.

__ `User-defined keywords`_


Built-in keywords
-----------------

Some generally useful keywords such as :name:`Get Time` and
:name:`Should Be Equal` are always available. Technically these
keywords come from a test library called BuiltIn_ and you can
see its documentation for a compleate list of available keywords.


Library keywords
----------------

All lowest level keywords are defined in test libraries which are
implemented using standard programming languages. Robot Framework
comes with a handful of libraries including an OperatingSystem_
library to support common operating system functions, and a
Screenshot_ library for taking screenshots.  In addition to these
*standard libraries*, there are other libraries distributed in
separate open source projects, such as SeleniumLibrary_ for Web
testing. It is also easy to `implement your own libraries`__ when
there is no suitable library available. For a list of available
libraries see
http://code.google.com/p/robotframework/wiki/TestLibraries.

__ `Creating test libraries`_

To be able to use keywords provided by a test library it must be taken
into use.  Tests in this file need keywords from the standard
OperatingSystem library (e.g. :name:`Remove File`) as wel as from a
custom made LoginLibrary (e.g. :name:`Attempt to login with
credentials`). Both of these libraries are imported in so called
*setting table* below.

.. table:: 
   :class: example

   ===============  ========================
       Setting                Value
   ===============  ========================
   Library          OperatingSystem
   Library          testlibs/LoginLibrary.py
   ===============  ========================


User-defined keywords
---------------------

One of the most powerful features of Robot Framework is the ability to
easily create new higher-level keywords from other keywords. The
syntax for creating these so called *user-defined keywords*, or *user
keywords* for short, is similar to the syntax that is used for
creating test cases. All the higher-level keywords needed
in previous test cases are created in the table below.

.. table:: 
   :class: example

   ===============================================  =================================  ==============================  ================
                   Keyword                                         Action                          Argument                Argument
   ===============================================  =================================  ==============================  ================
   Clear login database                             Remove file                        ${DATABASE_FILE}                \
   \                                                \                                  \                               \
   Create valid user                                [Arguments]                        ${username}                     ${password}
   \                                                Create user                        ${username}                     ${password}
   \                                                Status should be                   SUCCESS                         \
   \                                                \                                  \                               \
   Creating user with invalid password should fail  [Arguments]                        ${password}                     ${error}
   \                                                Create user                        example                         ${password}
   \                                                Status should be                   Creating user failed: ${error}  \
   \                                                \                                  \                               \
   Login                                            [Arguments]                        ${username}                     ${password}
   \                                                Attempt to login with credentials  ${username}                     ${password}
   \                                                Status should be                   Logged In                       \
   \                                                \                                  \                               \
   *# Used by BDD test cases*                       \                                  \                               \
   Given a user has a valid account                 Create valid user                  ${USERNAME}                     ${PASSWORD}
   When she changes her password                    Change password                    ${USERNAME}                     ${PASSWORD}
   \                                                ...                                ${NEW_PASSWORD}                 \
   \                                                Status should be                   SUCCESS                         \
   Then she can log in with the new password        Login                              ${USERNAME}                     ${NEW_PASSWORD}
   And she cannot use the old password anymore      Attempt to login with credentials  ${USERNAME}                     ${PASSWORD}
   \                                                Status should be                   Access Denied                   \
   ===============================================  =================================  ==============================  ================


User-defined keywords can include actions defined by other
user-defined keywords, built-in keywords, or library keywords.  As you
can see from this example, user-defined keywords can take parameters.
They can also return values and even contain FOR loops. For now, the
important thing to know is that user-defined keywords enable test
creators to create reusable steps for common action sequences.
User-defined keywords can also help the test author keep the tests as
readable as possible and use appropriate abstraction levels in
different situations.


Variables
=========

Defining Variables
------------------

Variables are an integral part of Robot Framework. Usually any data used in
tests that is subject to change is best defined as variables. Syntax for
variable definition is quite simple, as seen in this table:

.. table:: 
   :class: example

   ======================  =============================================================================  
          Variable                                           Value
   ======================  ============================================================================= 
   ${USERNAME}             janedoe
   ${PASSWORD}             J4n3d03
   ${NEW_PASSWORD}         30d3n4J
   \                       \
   ${DATABASE_FILE}        ${TEMPDIR}${/}robotframework-quickstart-db.txt
   \                       \
   ${PWD_INVALID_LENGTH}   Password must be 7-12 characters long
   ${PWD_INVALID_CONTENT}  Password must be a combination of lowercase and uppercase letters and numbers 
   ======================  =============================================================================


In addition to user defined variables , there are some built-in variables that 
are always available. :var:`${TEMPDIR}` in the above table is one such variable.
Variables can also be given from the command line which is useful if the tests
need to be executed in different environments. Variables can also be defined
in variable files.


Using Variables
---------------

Variables can be used in most places in the test data, most commonly as
arguments to keywords. Also all settings allow variables in their values.
Additionally, it is possible for keywords to return value(s) that can be
assigned to variable(s) and further used. 

User keyword :name:`Verify database content` used in the following test case
demonstrates the use of a variable to capture return value of a keyword (in
this case :name:`Get File` from :name:`OperatingSystem` test library) and
making assertions against it:

.. table:: 
   :class: example

   =====================================  =================================  =========  ========  ========
               Test Case                                 Action              Argument   Argument  Argument
   =====================================  =================================  =========  ========  ========
   Logging in changes the status of user  [ Tags ]                           example    variable  \
   \                                      Create Valid User                  fred       P4ssw0rd  \
   \                                      Verify database content            fred       P4ssw0rd  Inactive 
   \                                      Attempt to Login with Credentials  fred       P4ssw0rd  \
   \                                      Status Should Be                   Logged In  \         \
   \                                      Verify database content            fred       P4ssw0rd  Active  
   =====================================  =================================  =========  ========  ========

Tags will be explained in next chapter.


.. table:: 
   :class: example

   =======================  ==============  ===========  =====================================  =========
        Keyword                Action        Argument                Argument                   Argument
   =======================  ==============  ===========  =====================================  =========
   Verify database content  [Arguments]     ${username}  ${password}                            ${status}  
   \                        ${database} =   Get File     ${DATABASE FILE}                       \
   \                        Should Contain  ${database}  ${username}\\t${password}\\t${status}  \
   =======================  ==============  ===========  =====================================  =========


Organizing test cases
=====================


Test suites
-----------

Collections of test cases are called test suites in Robot Framework. Every input 
file which contains test case(s) forms a test suite. When running 
:cli:`pybot quickstart.html` you will see test suite Quickstart in the console 
output. It is also visible in the report and log and it contains all the test 
cases defined in this file.

Directory containing test suite file(s) forms also a test suite. Running command 
:cli:`pybot .` will run directory where this quickstart.html is located. 
This will produce one more level of test suites to the results. There is no 
limitation how many levels of test suites can be created with directory test 
suites. This makes it possible to organize the test cases to logically 
meaningful and manageable size directories and files. See more about test suites 
from `user guide`_.


Setup and teardown
------------------

If you want a set of actions to occur before and after each test
executes, use the Test Setup and Test Teardown settings in the Setting
table like so:

.. table:: 
   :class: example

   ===============  ========================
       Setting                Value
   ===============  ========================
   Test Setup       Clear Login Database
   Test Teardown    \
   ===============  ========================


Similarly you can use the Suite Setup and Suite Teardown settings to
specify actions to be executed before and after an entire test suite
executes.


Using tags
----------

.. table:: 
   :class: example

   ============  ===========  ===========
      Setting       Value        Value
   ============  ===========  ===========
   Default Tags  quickstart   example
   ============  ===========  =========== 

Tags are metadata in the test case and every test case can have any number of 
tags. Tags can be defined to all the test suite's test cases with Default Tags 
(see above) or Force Tags settings. It is also possible to define tags for 
single test case like in :name:`Logging in changes the status of user` test 
case.

Tags are used for three purposes: selecting test cases to be executed, defining 
critical test cases, and getting statistics. :cli:`pybot --include variable quickstart.html` 
will execute only test cases having tag :name:`variable` and 
:cli:`pybot --exclude variable quickstart.html` will execute all but test cases 
with tag :name:`variable`. :cli:`pybot --critical variable quickstart.html` will 
define that only test cases with tag :name:`variable` will affect the test 
execution result. You can see from output that there is only one critical test 
case. In case the other test cases would fail, the overall status would still be
pass. This functionality is useful in case you have test cases that you know 
will fail. This is the case at least when ATDD is used and the test cases are 
ready before the functionality is implemented. In report you can also see the 
:name:`Statistics by Tag` table which contains statistics per tag. See 
`user guide`_ for more details about tagging.


Creating test libraries
=======================

Robot Framework offers a simple API for creating test libraries, both with
Python and Java. The `user guide`_ contains detailed description with examples.

Below is the source code for the test library used in this guide. You can see, 
for example, how the keyword :name:`Create User` is mapped to actual
implementation of method :code:`create_user`.

.. sourcecode:: python 
   
  testlibs/LoginLibrary.py 



.. _User Guide: http://code.google.com/p/robotframework/wiki/UserGuide
.. _Robot Framework User Guide: `User Guide`_
.. _BuiltIn: http://code.google.com/p/robotframework/wiki/BuiltInLibrary
.. _OperatingSystem: http://code.google.com/p/robotframework/wiki/OperatingSystemLibrary
.. _Screenshot: http://code.google.com/p/robotframework/wiki/ScreenshotLibrary
.. _SeleniumLibrary: http://code.google.com/p/robotframework-seleniumlibrary
